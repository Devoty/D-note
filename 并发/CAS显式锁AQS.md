## CAS

---一条指令

---比较并且交换

---原子性

---加锁，停止等待

jdk---循环这条指定，直到完成

---乐观锁机制



Sync  比CAS慢？

CPU切换

指令数 比较多



## 显式锁Lock---非公平锁

对比sync:

---等锁的过程可以被中断

---可以判断是否拿到锁

---可以设置超时时间重新拿锁

选择synchronize---java内置，使用方便，执行速度更快



ReentrantLock()

公平锁和非公平锁

sync:非公平锁



使用公平锁的情况：

线程饥饿，所有线程全部执性



使用Lock时，注意释放锁



### 悲观锁 ---排它锁（独占锁）

读 ： 写

10 ：  1

---可以同时读



### ReadWriteLock接口（读写锁）

---线程写锁  独占 

---线程读锁，共享，不允许写





### Condition 接口





## AbstractQueuedSynchronizer 分析

---JUC并发包里的基础构建

模板方法模式---设计模式之一



抽象： 操作上浮，数据下沉















